#!/usr/bin/perl
# A script used by the authors of FastBit to configure the package.
# Terse comments are provided in hoping they might be instructive for
# configuring the package on other machines.
#
use Env qw(HOME HOSTNAME PWD);
if (! ${HOSTNAME}) {
    $HOSTNAME=`hostname`;
}
print "Configuring on ${HOSTNAME}\n";
if (${HOSTNAME} =~ m/bit\.[lbl.gov|local]/) {
# on John's machine, enable maintainer mode, use debug options
    $cmd="./configure --prefix=${HOME}/Darwin/fastbit --enable-maintainer-mode --with-java CFLAGS='-g -O0 -m64 -Wall' CXXFLAGS='-g -O0 -m64 -Wall'";
}
elsif (${HOSTNAME} =~ m/^hopper\w+[.nersc.gov]?$/ ) {
# on hopper at NERSC, use the default Cray compilers wrappers, no debugging
    $cmd="./configure CC=cc CXX=CC --disable-shared --without-getpwuid --disable-debug --enable-xopt --without-java --prefix=/project/projectdirs/m1248/hopper/fastbit";
}
elsif (${HOSTNAME} =~ m/^fr\w+[.nersc.gov]?$/ ) {
# on franklin at NERSC, use the default compilers, no debugging
    $cmd="./configure --disable-shared --without-getpwuid --disable-debug --enable-xopt --without-java --prefix=/project/projectdirs/m1248/franklin/fastbit";
}
elsif (${HOSTNAME} =~ m/^d\w+[.lbl.gov]?$/) {
# on sdm group's linux machines, know where is java and where to install
    $cmd="./configure --enable-xopt --disable-debug --with-java=/software/jdk1.6.0_24 --prefix=/data/john/Linux";
}
else { # use all default options on generic linux/unix machines
    $cmd="./configure --prefix=${PWD}";
}
print "$cmd\n\n";
system($cmd);
